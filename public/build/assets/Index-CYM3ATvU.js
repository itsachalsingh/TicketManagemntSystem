import{r as j,a as f,j as e,H as N,b as y}from"./app-CmKVqBY_.js";import{A as w}from"./AdminLayout-547HgU7n.js";import"./Dropdown-Umnt_gh2.js";import"./transition-DLr6TU6a.js";function A({users:i=[],roles:m=[]}){const[t,n]=j.useState(null),{data:r,setData:l,post:x,put:p,processing:c,reset:d,errors:a}=f({name:"",email:"",phone:"",role:"",password:"",password_confirmation:""}),g=s=>{n(s),l({name:s.name||"",email:s.email||"",phone:s.phone||"",role:s.role?.id?String(s.role.id):"",password:"",password_confirmation:""})},h=()=>{n(null),d()},u=s=>{s.preventDefault(),t?p(`/admin/users/${t.id}`,{onSuccess:()=>{n(null),d()}}):x("/admin/users",{onSuccess:()=>d()})},b=s=>{confirm("Are you sure you want to delete this user?")&&y.delete(`/admin/users/${s}`)};return e.jsxs(w,{children:[e.jsx(N,{title:"User Management"}),e.jsxs("div",{className:"p-8 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"User Management"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Create Admins or Support Agents, and manage existing users."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow p-6 border",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"All Users"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm text-left border rounded-lg overflow-hidden",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 font-medium text-gray-600",children:"Name"}),e.jsx("th",{className:"px-4 py-2 font-medium text-gray-600",children:"Email"}),e.jsx("th",{className:"px-4 py-2 font-medium text-gray-600",children:"Role"}),e.jsx("th",{className:"px-4 py-2 font-medium text-gray-600",children:"Actions"})]})}),e.jsx("tbody",{children:i.length>0?i.map(s=>e.jsxs("tr",{className:"border-t hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-2",children:s.name}),e.jsx("td",{className:"px-4 py-2",children:s.email}),e.jsx("td",{className:"px-4 py-2 capitalize",children:s.role?.name.replace(/_/g," ").replace(/\b\w/g,o=>o.toUpperCase())??"N/A"}),e.jsxs("td",{className:"px-4 py-2 flex gap-2",children:[e.jsx("button",{onClick:()=>g(s),className:"text-sm text-blue-600 hover:underline",children:"Edit"}),e.jsx("button",{onClick:()=>b(s.id),className:"text-sm text-red-600 hover:underline",children:"Delete"})]})]},s.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"px-4 py-4 text-center text-gray-500",children:"No users found."})})})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow p-6 border",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:t?"Edit User":"Add New User"}),e.jsxs("form",{onSubmit:u,className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600",children:"Name"}),e.jsx("input",{type:"text",value:r.name,onChange:s=>l("name",s.target.value),className:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:ring-indigo-500 focus:border-indigo-500"}),a.name&&e.jsx("span",{className:"text-sm text-red-500",children:a.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600",children:"Email"}),e.jsx("input",{type:"email",value:r.email,onChange:s=>l("email",s.target.value),className:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:ring-indigo-500 focus:border-indigo-500"}),a.email&&e.jsx("span",{className:"text-sm text-red-500",children:a.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600",children:"Phone"}),e.jsx("input",{type:"tel",value:r.phone,onChange:s=>l("phone",s.target.value),className:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:ring-indigo-500 focus:border-indigo-500"}),a.phone&&e.jsx("span",{className:"text-sm text-red-500",children:a.phone})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600",children:"Role"}),e.jsxs("select",{value:r.role,onChange:s=>l("role",s.target.value),className:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:ring-indigo-500 focus:border-indigo-500",children:[e.jsx("option",{value:"",children:"Select Role"}),m.map(s=>e.jsx("option",{value:s.id,children:s.name.replace(/_/g," ").replace(/\b\w/g,o=>o.toUpperCase())},s.id))]}),a.role&&e.jsx("span",{className:"text-sm text-red-500",children:a.role})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600",children:"Password"}),e.jsx("input",{type:"password",value:r.password,onChange:s=>l("password",s.target.value),className:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:ring-indigo-500 focus:border-indigo-500",placeholder:t?"Leave blank to keep current password":""}),a.password&&e.jsx("span",{className:"text-sm text-red-500",children:a.password})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600",children:"Confirm Password"}),e.jsx("input",{type:"password",value:r.password_confirmation,onChange:s=>l("password_confirmation",s.target.value),className:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:ring-indigo-500 focus:border-indigo-500",placeholder:t?"Leave blank to keep current password":""}),a.password_confirmation&&e.jsx("span",{className:"text-sm text-red-500",children:a.password_confirmation})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"submit",disabled:c,className:"inline-flex items-center px-4 py-2 bg-indigo-600 text-white font-medium rounded-lg hover:bg-indigo-700 transition",children:c?t?"Updating...":"Creating...":t?"Update User":"Create User"}),t&&e.jsx("button",{type:"button",onClick:h,className:"inline-flex items-center px-4 py-2 bg-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-400 transition",children:"Cancel"})]})]})]})]})]})]})}export{A as default};
